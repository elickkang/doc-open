

1. |          |                        | CPU                                         | OS                             | JVM                                                          | MYSQL                                       | 集群                                                         |
   | -------- | ---------------------- | ------------------------------------------- | ------------------------------ | :----------------------------------------------------------- | :------------------------------------------ | ------------------------------------------------------------ |
   | 概念     | 概念                   | **原子性**、**可见性**、                    | **原子性**、**可见性**、有序性 | **原子性**、**可见性（一致性）**、有序性                     | ACID **原子性**、**一致性**、隔离性、持久性 | CAP   一致性、可用性、分区容错性                             |
   | ***A***  | 原子性                 | TSL                                         | 信号量、互斥量、管程           | 锁、管程、                                                   | redo、undo日志（重做、回滚）                | redo、undo日志（重做、回滚）                                 |
   | ***C***  | ***一致性***（可见性） | ***MESI***[^1]、屏障、LOCK指令及CPU主线嗅探 | 信号量、互斥量、缓存过期       | 锁、管程、volatile[^2]变量修改后立即同步到主内存，被刷新的内存在每次使用前都从主内存刷新 | redo、undo日志（重做、回滚）                | 解决并发写的一致性问题；lease续租（类似volatile）、quorum(有效人数：paxos算法) |
   | ***O***  | 有序性                 | 禁用指令重排                                | 信号量、互斥量                 | volatile(禁用指令重排序)、锁                                 | -                                           | -                                                            |
   | ***I***  | 隔离性                 | TSL                                         | 信号量、互斥量、               | 锁                                                           | 锁、MVCC                                    | 多节点，天然隔离                                             |
   | ***D***  | 持久性                 | -                                           | -                              | -                                                            | -                                           | redo、undo日志（重做、回滚）                                 |
   | ***A'*** | 可用性                 | -                                           | -                              | -                                                            | -                                           | lease 为了满足一致性，对可用性做了妥协，是一般有10s延迟；quorum可以在满足一致性的同时较好地满足可用性，只要满足多余一半节点可用，整个服务就可以对外提供服务 |
   | ***P***  | 分区容错性             | -                                           | -                              | -                                                            | -                                           | lease有单点风险，中心化方案，需要主节点写入；quorum有较好地分区容错性，去中心化方案，多点写入。 |
   | ***C***  | 副本                   | 磁盘-主存-N级别缓存-寄存器                  | Buffer-Cache                   | 堆对象实例数据-线程私有栈部分区域                            | 锁当前读-MVCC多版本快照                     | 主节点-副本节点                                              |

[^1]: 参见【计算机硬件内存模型.md】

[^2]: 参见【JMM.md】


